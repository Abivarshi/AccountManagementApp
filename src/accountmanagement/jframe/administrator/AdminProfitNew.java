/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package accountmanagement.jframe.administrator;

import accountmanagement.database.DataBaseConnection;
import java.awt.Color;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JTextField;

/**
 *
 * @author COMPAQ
 */
public class AdminProfitNew extends javax.swing.JPanel {

    DataBaseConnection db = new DataBaseConnection();
    private final String shopName;

    /**
     * Creates new form AdminPurcharse
     *
     * @param shopName
     */
    public AdminProfitNew(String shopName) {
        this.shopName = shopName;
        initComponents();
        getAdminProfit();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        PPjTextField = new javax.swing.JTextField();
        NPPjButton = new javax.swing.JButton();
        warningLabel = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        GPPjTextField = new javax.swing.JTextField();
        jLabel3 = new javax.swing.JLabel();
        NPPjTextField = new javax.swing.JTextField();
        PPjButton = new javax.swing.JButton();
        GPPjButton = new javax.swing.JButton();

        setBackground(new java.awt.Color(255, 255, 255));
        setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jLabel1.setText("Purchase Percentage");
        add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(31, 31, 170, 22));
        add(PPjTextField, new org.netbeans.lib.awtextra.AbsoluteConstraints(210, 30, 114, -1));

        NPPjButton.setBackground(new java.awt.Color(0, 0, 102));
        NPPjButton.setForeground(new java.awt.Color(255, 255, 255));
        NPPjButton.setText("Update");
        NPPjButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                NPPjButtonActionPerformed(evt);
            }
        });
        add(NPPjButton, new org.netbeans.lib.awtextra.AbsoluteConstraints(360, 110, 90, -1));

        warningLabel.setForeground(new java.awt.Color(204, 0, 0));
        add(warningLabel, new org.netbeans.lib.awtextra.AbsoluteConstraints(350, 150, 100, 20));

        jLabel2.setText("Gross Profit Percentage");
        add(jLabel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 70, 170, 22));
        add(GPPjTextField, new org.netbeans.lib.awtextra.AbsoluteConstraints(210, 70, 114, -1));

        jLabel3.setText("Net Profit Percentage");
        add(jLabel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 110, 170, 22));
        add(NPPjTextField, new org.netbeans.lib.awtextra.AbsoluteConstraints(210, 110, 114, -1));

        PPjButton.setBackground(new java.awt.Color(0, 0, 102));
        PPjButton.setForeground(new java.awt.Color(255, 255, 255));
        PPjButton.setText("Update");
        PPjButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                PPjButtonActionPerformed(evt);
            }
        });
        add(PPjButton, new org.netbeans.lib.awtextra.AbsoluteConstraints(360, 30, 90, -1));

        GPPjButton.setBackground(new java.awt.Color(0, 0, 102));
        GPPjButton.setForeground(new java.awt.Color(255, 255, 255));
        GPPjButton.setText("Update");
        GPPjButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                GPPjButtonActionPerformed(evt);
            }
        });
        add(GPPjButton, new org.netbeans.lib.awtextra.AbsoluteConstraints(360, 70, 90, -1));
    }// </editor-fold>//GEN-END:initComponents

    private void NPPjButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_NPPjButtonActionPerformed
        if (!NPPjTextField.getText().isEmpty()) {
            try {
                db.updateAdminProfit(shopName, "NetProfitPercentage", Float.parseFloat(NPPjTextField.getText()));
                warningLabel.setText("Updated...");
                warningLabel.setForeground(Color.green);
            } catch (ClassNotFoundException ex) {
                Logger.getLogger(AdminProfitNew.class.getName()).log(Level.SEVERE, null, ex);
            } catch (SQLException ex) {
                Logger.getLogger(AdminProfitNew.class.getName()).log(Level.SEVERE, null, ex);
            }
        } else {
            warningLabel.setText("Value is Mandatory.");
        }
    }//GEN-LAST:event_NPPjButtonActionPerformed

    private void PPjButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_PPjButtonActionPerformed
        if (!PPjTextField.getText().isEmpty()) {
            try {
                db.updateAdminProfit(shopName, "PurchasePercentage", Float.parseFloat(PPjTextField.getText()));
                warningLabel.setText("Updated...");
                warningLabel.setForeground(Color.green);
            } catch (ClassNotFoundException ex) {
                Logger.getLogger(AdminProfitNew.class.getName()).log(Level.SEVERE, null, ex);
            } catch (SQLException ex) {
                Logger.getLogger(AdminProfitNew.class.getName()).log(Level.SEVERE, null, ex);
            }
        } else {
            warningLabel.setText("Value is Mandatory.");
        }
    }//GEN-LAST:event_PPjButtonActionPerformed

    private void GPPjButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_GPPjButtonActionPerformed
        if (!GPPjTextField.getText().isEmpty()) {
            try {
                db.updateAdminProfit(shopName, "GrossProfitPercentage", Float.parseFloat(GPPjTextField.getText()));
                warningLabel.setText("Updated...");
                warningLabel.setForeground(Color.green);
            } catch (ClassNotFoundException ex) {
                Logger.getLogger(AdminProfitNew.class.getName()).log(Level.SEVERE, null, ex);
            } catch (SQLException ex) {
                Logger.getLogger(AdminProfitNew.class.getName()).log(Level.SEVERE, null, ex);
            }
        } else {
            warningLabel.setText("Value is Mandatory.");
        }
    }//GEN-LAST:event_GPPjButtonActionPerformed

    private void getAdminProfit() {
        ResultSet res = db.getDeatilTableValue(shopName, "AdminProfit");
        String purchasePercentage = null;
        try {
            purchasePercentage = res.getString("PurchasePercentage");
            PPjTextField.setText(purchasePercentage);
            String grossProfitPercentage = res.getString("GrossProfitPercentage");
            GPPjTextField.setText(grossProfitPercentage);
            String netProfitPercentage = res.getString("NetProfitPercentage");
            NPPjTextField.setText(netProfitPercentage);

        } catch (SQLException ex) {
            Logger.getLogger(AdminPurcharse.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton GPPjButton;
    private javax.swing.JTextField GPPjTextField;
    private javax.swing.JButton NPPjButton;
    private javax.swing.JTextField NPPjTextField;
    private javax.swing.JButton PPjButton;
    private javax.swing.JTextField PPjTextField;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel warningLabel;
    // End of variables declaration//GEN-END:variables
}
